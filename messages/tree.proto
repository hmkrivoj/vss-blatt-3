syntax = "proto3";
package messages;

message Credentials {
    int64 id = 1;
    string token = 2;
}

message Item {
    int64 key = 1;
    string value = 2;
}

message CreateTreeRequest {
    int64 maxSize = 1;
}

message CreateTreeResponse {
    Credentials credentials = 1;
}

message InsertRequest {
    Credentials credentials = 1;
    Item item = 2;
}

message InsertResponse {
    Item item = 1;
    Type type = 2;
}

message DeleteRequest {
    Credentials credentials = 1;
    int64 key = 2;
}

message DeleteResponse {
    Item item = 1;
    bool success = 2;
    Type type = 3;
}

message SearchRequest {
    Credentials credentials = 1;
    int64 key = 2;
}

message SearchResponse {
    Item item = 1;
    Type type = 2;
}

message TraverseRequest {
    Credentials credentials = 1;
}

message TraverseResponse {
    repeated Item items = 1;
}


enum Type {
    SUCCESS = 0;
    KEY_ALREADY_EXISTS = 1;
    NO_SUCH_KEY = 2;
    ACCESS_DENIED = 3;
    NO_SUCH_TREE = 4;
}
